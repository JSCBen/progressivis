<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Progressive MDS</title>
  <link rel="stylesheet" type="text/css" href="static/css/mds.css">
  <script type="text/javascript" src="static/js/lib/jquery/jquery-1.11.2.min.js"></script>
  <script type="text/javascript" src="static/js/lib/socket-io/socket.io.min.js"></script>
  <script type="text/javascript" src="static/js/lib/d3/d3.min.js"></script>
  <script type="text/javascript" src="static/js/mds.js"></script>
</head>
<body>
<p>
  <input id="range" type="range" name="version" min="0" max="2" value="0">
  <input id="value" type="text" name="value" size="4" pattern="[0-9]*"
</p>
  <script>
var url = "/data/mds/";
    selected = 0;

function geturl() {
    return url + selected;
}


var margin = {top: 20, right: 20, bottom: 30, left: 40},
    width = 960 - margin.left - margin.right,
    height = 660 - margin.top - margin.bottom;

var x = d3.scale.linear()
    .range([0, width]);

var y = d3.scale.linear()
    .range([height, 0]);

var color = d3.scale.category10();

var xAxis = d3.svg.axis()
    .scale(x)
    .orient("bottom");

var yAxis = d3.svg.axis()
    .scale(y)
    .orient("left");

var svg = d3.select("body").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");


var dataset = [];

function update(n) {
    if (n >= dataset.length)
	n = dataset.length;
    selected = n;
    if (selected == dataset.length) {
	d3.tsv(geturl(), function(error,data) {
	    console.log('Dataset '+selected+' loaded');
	    dataset.push(data);
	    update_mds(error, data);
	});
	$('#range').attr('max', selected+1);
    }
    else
	update_mds(null, dataset[selected]);
    $('#range').attr('value', selected);
    $('#value').attr('value', selected);
}

  $('#range').on("change", function(){ update(this.value)});

  update(1);

  </script>


</body>
</html>
